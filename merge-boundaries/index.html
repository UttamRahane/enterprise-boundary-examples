<!DOCTYPE html>
<html lang='en'>

<head>
    <title>
        Mapbox Admin Polygons with the client-side Data-Join technique
    </title>
    <meta charset='utf-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <!-- Mapbox GL-JS CSS -->
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.37.0/mapbox-gl.css' rel='stylesheet' />
    <!-- Mapbox Assembly -->
    <link href='https://api.mapbox.com/mapbox-assembly/v0.12.0/assembly.min.css' rel='stylesheet'>
    <script async defer src='https://api.mapbox.com/mapbox-assembly/v0.12.0/assembly.js'></script>
    <link href="https://api.mapbox.com/mapbox-assembly/mapbox-addon/v0.3.0/assembly.min.css" rel="stylesheet">
    <script src="https://api.mapbox.com/mapbox-assembly/mapbox-addon/v0.3.0/assembly.js"></script>
    <script type="text/javascript">
    if (window.location.hostname === 'www.mapbox.com') {
        ! function() {
            var analytics = window.analytics = window.analytics || [];
            if (!analytics.initialize)
                if (analytics.invoked) window.console && console.error && console.error("Segment snippet included twice.");
                else {
                    analytics.invoked = !0;
                    analytics.methods = ["trackSubmit", "trackClick", "trackLink", "trackForm", "pageview", "identify", "reset", "group", "track", "ready", "alias", "debug", "page", "once", "off", "on"];
                    analytics.factory = function(t) {
                        return function() {
                            var e = Array.prototype.slice.call(arguments);
                            e.unshift(t);
                            analytics.push(e);
                            return analytics
                        }
                    };
                    for (var t = 0; t < analytics.methods.length; t++) {
                        var e = analytics.methods[t];
                        analytics[e] = analytics.factory(e)
                    }
                    analytics.load = function(t) {
                        var e = document.createElement("script");
                        e.type = "text/javascript";
                        e.async = !0;
                        e.src = ("https:" === document.location.protocol ? "https://" : "http://") + "cdn.segment.com/analytics.js/v1/" + t + "/analytics.min.js";
                        var n = document.getElementsByTagName("script")[0];
                        n.parentNode.insertBefore(e, n)
                    };
                    analytics.SNIPPET_VERSION = "4.0.0";
                    analytics.load("fl0c8p240n");
                    analytics.page();

                    analytics.track('Viewed demo', {
                        name: 'vt-polygons/merge-boundaries'
                    });

                    // Get currently logged in user on mapbox.com
                    var xhttp = new XMLHttpRequest();
                    xhttp.onreadystatechange = function() {
                        if (this.readyState == 4 && this.status == 200) {
                            var resp = JSON.parse(xhttp.responseText);
                            console.log(resp.id);
                            analytics.identify(resp.id, {
                                email: resp.email
                            });
                        }
                    }
                    xhttp.open("GET", "https://www.mapbox.com/api/session", true);
                    xhttp.send();
                }
        }();
    }
    </script>
</head>

<body>
    <div class='flex-parent viewport-full relative clip'>
        <div class='flex-child w-full w300-ml absolute static-ml left bottom'>
            <div class='flex-parent flex-parent--column viewport-third h-full-ml hmax-full bg-white scroll-auto'>
                <div class='flex-child flex-child--grow p12 scroll-auto'>
                    <h3 class='txt-m txt-bold mb6'>Merge Mapbox Enterprise Boundaries</h3>
                    <p>Visually join and label Mapbox Enterprise Boundaries together for data visualizations.</p>
                </div>
            </div>
        </div>
        <div class='flex-child flex-child--grow viewport-twothirds viewport-full-ml relative'>
            <div id='map' class='absolute top bottom right left w-full'></div>
            <div class='viewport-full relative' id='loading'>
                <div class='flex-parent flex-parent--center-cross flex-parent--center-main absolute top right bottom left bg-darken10 z5'>
                    <div class='flex-child loading--dark'></div>
                </div>
            </div>
        </div>
        <script src='bundle.js'></script>
</body>

</html>
